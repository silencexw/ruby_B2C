<div>
  <h1>产品颜色管理</h1>

  <% if @colors.any? %>
    <table class="table table-striped">
      <tr>
        <th>名称</th>
        <th>颜色</th>
        <th>操作</th>
        <th></th>
      </tr>

      <% @colors.each do |color| %>
        <tr>
          <td><%= color_name(color.color_id) %></td>
          <td><%= raw get_color(color.color_id) %></td>
          <td>
            <%= link_to "删除", admin_product_color_path(product_id: @product, id: color), method: :delete, 'data-confirm': "确认删除吗?", class: "btn btn-sm btn-danger-small" %>
          </td>
        </tr>
      <% end %>
    </table>
  <% else %>
    <p>暂无颜色可供管理。</p>
  <% end %>

  <h2>添加颜色</h2>
  <% if @product.colors.any? %>
    <p>已经选择了颜色：<%= @product.colors.map { |s| color_name(s.color_id) }.join(", ") %></p>
  <% end %>
  <%= form_with(model: @color, url: admin_product_colors_path(product_id: @product)) do |form| %>
    <% colors = [1, 2, 3] %>
    <div class="size-selection">
      <% colors.each do |color| %>
        <% unless @product.colors.exists?(color_id: color) %>
          <div>
            <%= form.check_box :colors, { multiple: true, checked: false }, color %>
            <td><%= raw get_color(color) %></td>
          </div>
        <% end %>
      <% end %>
    </div>

    <%= form.submit "添加颜色", class: "btn btn-primary" %>
  <% end %>

</div>
